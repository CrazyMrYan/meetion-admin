<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../src/meetion.css">
    <script src="../../src/util/jquery.min3.3.1.js"></script>


    <style>


    </style>
</head>

<body>
    <div class="">
        <div class="M_Breadcrumb_" style="background: #fff;margin-bottom: 15px;">
            [
            {"name":"生态系统","link":"javascript:;"}
            ,{"name":"Router","link":"javascript:;"}
            ]
        </div>
        <div class="" style="width: 100%;margin: 15px 0;">
            <p class="M_P_Title" style="margin:10px 0;background: #fff;padding: 15px;"> Router.js</p>
        </div>
        <div class="M_Card" style="height: 700px;overflow: hidden;">


            <ul class="" style="overflow: hidden;">
                <li>
                    <div class="Flex">
                        <code style="flex: 1;" class="Mcode_js">
                            // 变量 router 为目录列表 ;<br>
                            var router = [] <br>
                            router.push(<br>
                                {<br>
                                    name:"首页",  // name:导航名称;<br>
                                    path:'vivews/home.html', // path:路径;<br>
                                    icon:"fa fa-home "// icon:字体图标;<br>
                                },<br>
                                {<br>
                                    name:"table表格",<br>
                                    path:'vivews/table.html',<br>
                                    icon:"fa fa-table"<br>
                                },<br>
                                {<br>
                                    name:"login模板",<br>
                                    path:'../login.html',<br>
                                    icon:"fa fa-bars"<br>
                                },<br>
                                {<br>
                                    name:"404模板",<br>
                                    path:'../404.html',<br>
                                    icon:"fa fa-bar-chart"<br>
                                }<br>
                            )<br>
                         
                        </code>
                        <code style="flex: 1;;margin-left: 15px;" class="Mcode_js">
                            // RouterWatcher 是 router 监听;<br>
                            // RouterWatcher的原理是采用的 Object.defineProperty<br>
                            // 有兴趣的小盆友可以看看 admin 里的 Router.js<br>
                            let RouterGuard = new RouterWatcher({<br>
                                data:{<br>
                                    // 将本地存储的token 绑定到 data.token上 <br>
                                    token : localStorage.getItem('token'),<br>
                                    // 将本地 router 绑定到 data.router上 <br>
                                    router : router<br>
                                },<br>
                                watch:{<br>
                                    // 当 token 发生变化时 这里会第一时间接受到状态;<br>
                                    token(newVal,oldVal){<br>
                                        // 只要 token 发生改变直接跳转到登录页<br>
                                        location.href = 'vivews/login.html';<br>
                                    },<br>
                                    // 当 router 发生变化时 这里会第一时间接受到状态;<br>
                                    router(newVal,oldVal){<br>
                                        // 接收新的 router 给它重新赋值<br>
                                        router = newVal;<br>
                                    }<br>
                                }<br>
                            })
                            <br>
                        </code>
                        <code style="flex: 1;margin-left: 15px;" class="Mcode_js">
                            // RouterGuard.router 是动态路由的操作 <br>
                            // 可以通过 RouterGuard.router 重新赋值做为权限判断 <br>
                            RouterGuard.router = [<br>
                                {<br>
                                    name:"home 首页",<br>
                                    path:'vivews/home.html',<br>
                                    icon:"fa fa-home "<br>
                                },<br>
                                {<br>
                                    name:"table 表格",<br>
                                    path:'vivews/table.html',<br>
                                    icon:"fa fa-table"<br>
                                },<br>
                                {<br>
                                    name:"button 按钮",<br>
                                    path:'vivews/button.html',<br>
                                    icon:"fa fa-bandcamp"<br>
                                }, <br>
                                {<br>
                                    name:"tool 工具",<br>
                                    path:'vivews/tool.html',<br>
                                    icon:"fa fa-cogs"<br>
                                } <br>
                            ]<br>
                        </code>
                    </div>
                </li>
            </ul>
        </div>

    </div>
</body>

<script src="../../src/meetion.js"></script>
<script>

</script>
<script src="../../src/util/code_html.js"></script>
<script src="../../src/util/code.js"></script>

</html>